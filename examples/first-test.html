<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>Sticky Header</title>
<link type="text/css" href="../assets/css/common-min.css" media="screen" rel="stylesheet">
<style>
body {
	margin: 0;
	background: #fff;
	color: #000;
	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
	overflow-x: hidden;
}
.fl {
	float: left;
}
body > header {
	position: fixed;
	background: #fafafa;
	width: 100%;
	z-index: 10000;
	top: 0;
	height: 50px;
	padding: 15px;
}
h1, h2, h3, h4, h5, h6 {
	font-weight: normal;
	margin: 0;
	padding: 0;
}
h1 {
	font-size: 16px;
}
h2 {
	font-size: 14px;
}
.asset {
	margin-top: 50px;
}
.asset .content {
	padding: 10px 15px;
}
.asset img.img-asset {
	width: 100%;
	height: auto;
}
.sticky-header {
	position: relative;
	width: 100%;
	padding: 10px 15px;
	background: #fff;
	z-index: 1;
}
.sticky-header.fixed {
	position: fixed;
	top: 50px;
	width: 100%;
	z-index: 0;
}
.sticky-header.fixed.absolute {
	position: absolute;
}
header .collection {
	margin-right: 10px;
}
</style>
</head>

<body>
<header>
	<h1>Heading</h1>
</header>
<div class="assets">
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 1</h1>
				<h2>First thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_01.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 2</h1>
				<h2>Second thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_02.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 3</h1>
				<h2>Third thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_03.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 4</h1>
				<h2>Fourth thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_04.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 5</h1>
				<h2>Fifth thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_05.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 6</h1>
				<h2>Sixth thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_06.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 7</h1>
				<h2>Seventh thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_07.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
	<div class="asset">
		<header class="sticky-header clearfix"><img src="img/collection_01.jpg" class="collection fl" width="40" height="40">
			<div class="fl">
				<h1>Heading 8</h1>
				<h2>Eighth thing</h2>
			</div>
		</header>
		<div class="content"><img src="img/img_08.jpg" class="img-asset" width="190" height="190">
			<p>Lorem ipsum</p>
		</div>
	</div>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script> 
<script type="text/javascript">

function stickyTitles(stickies) {

    this.load = function() {

			  stickies.each(function(){
				
				    var thisSticky = jQuery(this).wrap('<div class="followWrap" />');
				        thisSticky.parent().height(thisSticky.outerHeight());
				
				    jQuery.data(thisSticky[0], 'pos', thisSticky.offset().top-50);

			  });
		}
			
		this.scroll = function() {
		
			  stickies.each(function(i){				
				
				    var thisSticky = jQuery(this),
					      nextSticky = stickies.eq(i+1),
					      prevSticky = stickies.eq(i-1),
					      pos = jQuery.data(thisSticky[0], 'pos');
			
				    if (pos <= jQuery(window).scrollTop()) {
					
					      thisSticky.addClass("fixed");
					
					      if (nextSticky.length > 0 && thisSticky.offset().top >= jQuery.data(nextSticky[0], 'pos') - thisSticky.outerHeight()) {
						
						        thisSticky.addClass("absolute").css("top", jQuery.data(nextSticky[0], 'pos') - thisSticky.outerHeight()+50);

					      }
					
				    } else {
					
					      thisSticky.removeClass("fixed");
					
					      if (prevSticky.length > 0 && jQuery(window).scrollTop() <= jQuery.data(thisSticky[0], 'pos')  - prevSticky.outerHeight()) {
					
						        prevSticky.removeClass("absolute").removeAttr("style");
					
					      }
					
				    }
		    });			
    }
}
	
jQuery(document).ready(function(){
	
		var newStickies = new stickyTitles(jQuery(".sticky-header"));
		
		newStickies.load();
			
		jQuery(window).on("scroll", function() {

			  newStickies.scroll();
		
		});
});
</script>
</body>
</html>
